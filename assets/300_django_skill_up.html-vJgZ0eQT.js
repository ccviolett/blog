import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as a,c as s,f as t}from"./app-D5ExZMHw.js";const e={},o=t(`<h1 id="django-技能精进" tabindex="-1"><a class="header-anchor" href="#django-技能精进" aria-hidden="true">#</a> Django 技能精进</h1><h2 id="django-restful-framework" tabindex="-1"><a class="header-anchor" href="#django-restful-framework" aria-hidden="true">#</a> Django RESTful Framework</h2><h3 id="功能实现" tabindex="-1"><a class="header-anchor" href="#功能实现" aria-hidden="true">#</a> 功能实现</h3><h4 id="二级路由分页" tabindex="-1"><a class="header-anchor" href="#二级路由分页" aria-hidden="true">#</a> 二级路由分页</h4><p>在 DRF 中，我们可以很方便地通过 ViewSet 生成包含基础 CRUD 的 endpoint，并且能够通过 <code>@action</code> 装饰器在当前 endpoint 下快速注册子路由。</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token decorator annotation punctuation">@action</span><span class="token punctuation">(</span>detail<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">&#39;get&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> url_path<span class="token operator">=</span><span class="token string">&#39;status/(?P&lt;status_code&gt;\\d+)&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">get_status_vulinfos</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> status_code<span class="token punctuation">)</span><span class="token punctuation">:</span>
	vulinfos <span class="token operator">=</span> VulInfo<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>status<span class="token operator">=</span>status_code<span class="token punctuation">)</span>

	page <span class="token operator">=</span> self<span class="token punctuation">.</span>paginate_queryset<span class="token punctuation">(</span>vulinfos<span class="token punctuation">)</span>
	<span class="token keyword">if</span> page <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
		serializer <span class="token operator">=</span> VulInfoSerializer<span class="token punctuation">(</span>page<span class="token punctuation">,</span> many<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
		<span class="token keyword">return</span> self<span class="token punctuation">.</span>get_paginated_response<span class="token punctuation">(</span>serializer<span class="token punctuation">.</span>data<span class="token punctuation">)</span>

	serializer <span class="token operator">=</span> VulInfoSerializer<span class="token punctuation">(</span>vulinfos<span class="token punctuation">,</span> many<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> Response<span class="token punctuation">(</span>serializer<span class="token punctuation">.</span>data<span class="token punctuation">,</span> status<span class="token operator">=</span><span class="token number">200</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,6),p=[o];function c(i,l){return a(),s("div",null,p)}const d=n(e,[["render",c],["__file","300_django_skill_up.html.vue"]]);export{d as default};
