import{_ as t}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as o,o as p,c,a as n,b as s,d as e,f as r}from"./app-CahC9Ikc.js";const i={},l=r(`<h1 id="drf-开发-web-api-基础" tabindex="-1"><a class="header-anchor" href="#drf-开发-web-api-基础" aria-hidden="true">#</a> DRF 开发 Web API 基础</h1><p>Django REST framework (DRF) 是一个成熟的 Python 后端框架。</p><h3 id="安装依赖" tabindex="-1"><a class="header-anchor" href="#安装依赖" aria-hidden="true">#</a> 安装依赖</h3><p>通过 <code>pip install django-rest-framework</code> 安装支持 RESTful 风格 API 的组件。</p><p>将安装的 <code>rest_framework</code> 应用添加到项目设置中，修改项目文件夹下的 <code>settings.py</code> 如下：</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>INSTALLED_APPS <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token string">&#39;rest_framework&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="创建应用" tabindex="-1"><a class="header-anchor" href="#创建应用" aria-hidden="true">#</a> 创建应用</h3><p>我们假定项目名称为 <code>[project_name]</code>，应用名称为 <code>[app_name]</code>。</p><p>进入应用目录，编辑 <code>views.py</code> 代码如下：</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">from</span> django<span class="token punctuation">.</span>shortcuts <span class="token keyword">import</span> render
<span class="token keyword">from</span> django<span class="token punctuation">.</span>http <span class="token keyword">import</span> HttpResponse
<span class="token keyword">from</span> rest_framework <span class="token keyword">import</span> viewsets

<span class="token keyword">class</span> <span class="token class-name">AnalyzeViewSet</span><span class="token punctuation">(</span>viewsets<span class="token punctuation">.</span>ModelViewSet<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">create</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">&#39;create&#39;</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">list</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">&#39;list&#39;</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">retrieve</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">&#39;retrieve&#39;</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">update</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">&#39;update&#39;</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">destroy</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">&#39;destroy&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这就是一个标准的 RESTful API 的格式了，我们只需要在每个函数中完成相对应的功能即可，也可以在函数中使用 <code>super().[function]()</code> 来调用外部的函数。</p><h3 id="获取参数" tabindex="-1"><a class="header-anchor" href="#获取参数" aria-hidden="true">#</a> 获取参数</h3><p>其中 <code>request</code> 为 <code>Django REST framework</code> 的 <code>Requests</code>，可以通过 <code>request.data</code> 获取 POST 的数据，通过 <code>request.query_parmas</code> 获取 GET 的数据。</p><h3 id="设置路由" tabindex="-1"><a class="header-anchor" href="#设置路由" aria-hidden="true">#</a> 设置路由</h3><p>修改项目文件夹 <code>[project_name]/[project_name]</code> 下的 <code>urls.py</code> 来设置路由。</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib <span class="token keyword">import</span> admin
<span class="token keyword">from</span> django<span class="token punctuation">.</span>urls <span class="token keyword">import</span> path<span class="token punctuation">,</span> include
<span class="token keyword">from</span> rest_framework <span class="token keyword">import</span> routers

<span class="token keyword">from</span> api<span class="token punctuation">.</span>views <span class="token keyword">import</span> AnalyzeViewSet

router <span class="token operator">=</span> routers<span class="token punctuation">.</span>DefaultRouter<span class="token punctuation">(</span><span class="token punctuation">)</span>
router<span class="token punctuation">.</span>register<span class="token punctuation">(</span><span class="token string">r&#39;analyze&#39;</span><span class="token punctuation">,</span> AnalyzeViewSet<span class="token punctuation">,</span> basename<span class="token operator">=</span><span class="token string">&#39;&#39;</span><span class="token punctuation">)</span>

urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>
    path<span class="token punctuation">(</span><span class="token string">&#39;admin/&#39;</span><span class="token punctuation">,</span> admin<span class="token punctuation">.</span>site<span class="token punctuation">.</span>urls<span class="token punctuation">)</span><span class="token punctuation">,</span>
    path<span class="token punctuation">(</span><span class="token string">&#39;api/&#39;</span><span class="token punctuation">,</span> include<span class="token punctuation">(</span>router<span class="token punctuation">.</span>urls<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>我们</p><h3 id="参考资料" tabindex="-1"><a class="header-anchor" href="#参考资料" aria-hidden="true">#</a> 参考资料</h3>`,18),u={href:"https://segmentfault.com/a/1190000043865961",target:"_blank",rel:"noopener noreferrer"},d={href:"https://blog.csdn.net/qq_41854273/article/details/83893657",target:"_blank",rel:"noopener noreferrer"},k=n("code",null,"base_name",-1),m=n("code",null,"basename",-1),v={href:"https://geek-docs.com/django/django-questions/887_django_expected_a_response_httpresponse_or_httpstreamingresponse_to_be_returned_from_the_view_but_received_a_class_nonetype.html",target:"_blank",rel:"noopener noreferrer"},h={href:"https://www.django-rest-framework.org/api-guide/requests/",target:"_blank",rel:"noopener noreferrer"},_={href:"https://km.woa.com/articles/show/565852?from=iSearch",target:"_blank",rel:"noopener noreferrer"},f={href:"https://zhuanlan.zhihu.com/p/643397754",target:"_blank",rel:"noopener noreferrer"},b={href:"https://www.jianshu.com/p/4b746e566d78",target:"_blank",rel:"noopener noreferrer"};function g(w,y){const a=o("ExternalLinkIcon");return p(),c("div",null,[l,n("ul",null,[n("li",null,[n("a",u,[s("python - 利用 Django REST framework 构建 RESTful Web API - 个人文章 - SegmentFault 思否"),e(a)])]),n("li",null,[n("a",d,[s("AssertionError: "),k,s(" argument not specified, and could not automatically determine the..._"),m,s(" argument not specified, and could not a-CSDN博客"),e(a)])]),n("li",null,[n("a",v,[s("Django 预期从视图返回Response、HttpResponse或HttpStreamingResponse，但接收到的是|极客教程 (geek-docs.com)"),e(a)])]),n("li",null,[n("a",h,[s("Requests - Django REST framework (django-rest-framework.org)"),e(a)])]),n("li",null,[n("a",_,[s("Django REST Framework 常见需求实践 - 微信后台开发 - KM平台 (woa.com)"),e(a)])]),n("li",null,[n("a",f,[s("深入探索 Django Rest Framework - 知乎 (zhihu.com)"),e(a)])]),n("li",null,[n("a",b,[s("django rest framework 获取前端参数的几种方式 - 简书 (jianshu.com)"),e(a)])])])])}const S=t(i,[["render",g],["__file","340_web_api_by_drf.html.vue"]]);export{S as default};
